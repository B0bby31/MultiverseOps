deployment:
  # -- Enable deployment
  enabled: true
  # -- Deployment or DaemonSet
  kind: DaemonSet

service:
  enabled: true
  ## -- Single service is using `MixedProtocolLBService` feature gate.
  ## -- When set to false, it will create two Service, one for TCP and one for UDP.
  single: false
  type: LoadBalancer
  annotations:
    "lbipam.cilium.io/sharing-key": "traefik-internal"
  labels:
    network: known
  
  additionalServices: 
  ## -- An additional and optional internal Service.
  ## Same parameters as external Service
    exceptional-tcp:
      type: LoadBalancer
      labels: 
        network: lan
      annotations:
        "lbipam.cilium.io/sharing-key": "traefik-excep"
      spec:
        ports:
          - port: 443
            targetPort: 8000
            protocol: TCP
    exceptional-udp:
      type: LoadBalancer
      labels: 
        network: lan
      annotations:
        "lbipam.cilium.io/sharing-key": "traefik-excep"
      spec:
        ports:
          - port: 443
            targetPort: 8000
            protocol: UDP

ports:
  web:
    redirections:
      entryPoint:
        to: websecure
        scheme: https
        permanent: true
  websecure:
    http3:
      enabled: true
      advertisedPort: 443


# -- Create a default IngressClass for Traefik
ingressClass:  # @schema additionalProperties: false
  enabled: true
  isDefaultClass: true
  name: "traefik-internal"

providers:
  kubernetesIngress:
    # -- Load Kubernetes Ingress provider
    enabled: true

    # -- When ingressClass is set, only Ingresses containing an annotation with the same value are processed. Otherwise, Ingresses missing the annotation, having an empty value, or the value traefik are processed.
    ingressClass: "traefik-internal"
    # labelSelector: environment=production,method=traefik
    # -- Array of namespaces to watch. If left empty, Traefik watches all namespaces. . When using `rbac.namespaced`, it will watch helm release namespace and namespaces listed in this array.
    namespaces: []