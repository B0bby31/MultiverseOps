apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: mqtt-lock-secrets
spec:
  refreshInterval: 300s
  secretStoreRef:
    name: bitwarden-secretsmanager
    kind: ClusterSecretStore

  # So that I can edit the resulting secret
  target:

    template:

      # Use inline templates to construct your desired config file that contains your secret
      data:
        MQTT_PASSWORD: '{{ .password }}'
        AUTH_BEARER_TOKEN: '{{ .token }}'

  data:
  - secretKey: password
    remoteRef:
      key: "4ece53c9-3399-49f8-b5fb-b3460151f78c"
  - secretKey: token
    remoteRef:
      key: "79b72970-6d1a-4d25-b6b1-b3c8010239b8"